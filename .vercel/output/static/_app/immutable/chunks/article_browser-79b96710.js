import{U as ce,S as P,i as J,s as U,L as j,M as O,N as L,m as p,h as _,n as b,O as G,b as S,D as h,P as Me,B as Z,Q as K,R as $,q as x,r as ee,u as te,e as re,f as m,g as H,t as w,d as Q,T as W,k,w as z,a as R,l as E,x as M,c as T,y as V,z as I,a4 as Ne,a5 as je,a6 as me,E as se,a7 as Oe,J as Le,X as Pe,a3 as Je,I as Ue,_ as Ye,$ as qe,a0 as Ze}from"./index-8132481b.js";import{a as ie,u as He}from"./articles-885999f7.js";import{a as Qe}from"./datatypes-f51f27d5.js";import{m as ge}from"./index-1d5742ea.js";import{i as ve,D as We}from"./db_image-fcafce18.js";import{a as Ve}from"./auth_state-7a238df3.js";import{B as Ie}from"./button-e8e119c3.js";import{f as pe,i as Xe,o as Fe}from"./delay-2aed76c9.js";async function Ge(n,e,r){const t=await fetch("/api/get_articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start:n,end:e,filter:r})}),{articles:a}=ge.object({articles:ge.array(Qe)}).parse(await t.json()),l=a.map(f=>({id:f.id,title:f.title,createdAt:f.createdAt,image_link_id:f.image_link.id})),i=ce(ie);l.forEach(f=>{i[f.id]=f}),ie.set(i);const o=ce(ve);return a.forEach(f=>{o[f.image_link.id]=f.image_link.image_url}),ve.set(o),l}function be(n){let e,r;return{c(){e=O("title"),r=x(n[1])},l(t){e=L(t,"title",{});var a=p(e);r=ee(a,n[1]),a.forEach(_)},m(t,a){S(t,e,a),h(e,r)},p(t,a){a&2&&te(r,t[1])},d(t){t&&_(e)}}}function Ke(n){let e,r,t=n[1]&&be(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let i=0;i<a.length;i+=1)l=j(l,a[i]);return{c(){e=O("svg"),t&&t.c(),r=O("path"),this.h()},l(i){e=L(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=p(e);t&&t.l(o),r=L(o,"path",{d:!0}),p(r).forEach(_),o.forEach(_),this.h()},h(){b(r,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),G(e,l)},m(i,o){S(i,e,o),t&&t.m(e,null),h(e,r)},p(i,[o]){i[1]?t?t.p(i,o):(t=be(i),t.c(),t.m(e,r)):t&&(t.d(1),t=null),G(e,l=Me(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:i[0]},o&1&&{height:i[0]},o&4&&i[2],o&8&&i[3]]))},i:Z,o:Z,d(i){i&&_(e),t&&t.d()}}}function $e(n,e,r){let t,a;const l=["size","title"];let i=K(e,l),{size:o=16}=e,{title:f=void 0}=e;return n.$$set=s=>{r(5,e=j(j({},e),$(s))),r(3,i=K(e,l)),"size"in s&&r(0,o=s.size),"title"in s&&r(1,f=s.title)},n.$$.update=()=>{r(4,t=e["aria-label"]||e["aria-labelledby"]||f),r(2,a={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=$(e),[o,f,a,i,t]}class xe extends P{constructor(e){super(),J(this,e,$e,Ke,U,{size:0,title:1})}}async function et(n){const e=await fetch("/api/delete_article",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n})});if(e.status!==200)throw new Error(`Error deleting article: ${e.status}`);const r=ce(ie);delete r[n],ie.set(r)}function we(n){let e,r,t,a,l,i,o=n[0].title+"",f,s,c,u=new Date(JSON.parse(n[0].createdAt)).toLocaleString("de-DE")+"",d,C,A,D,le,N;t=new We({props:{id:n[0].image_link_id,width:"100%",attr:"w-300,ar-5-3,fo-auto"}}),D=new Ie({props:{text:"\xD6ffnen",onclick:`/articles/${n[0].id}`}});let g=n[2]&&ye(n);return{c(){e=k("div"),r=k("div"),z(t.$$.fragment),a=R(),l=k("div"),i=k("h3"),f=x(o),s=R(),c=k("p"),d=x(u),C=R(),A=k("div"),z(D.$$.fragment),le=R(),g&&g.c(),this.h()},l(v){e=E(v,"DIV",{class:!0});var y=p(e);r=E(y,"DIV",{class:!0});var Y=p(r);M(t.$$.fragment,Y),Y.forEach(_),a=T(y),l=E(y,"DIV",{class:!0});var B=p(l);i=E(B,"H3",{class:!0});var de=p(i);f=ee(de,o),de.forEach(_),s=T(B),c=E(B,"P",{});var he=p(c);d=ee(he,u),he.forEach(_),B.forEach(_),C=T(y),A=E(y,"DIV",{class:!0});var F=p(A);M(D.$$.fragment,F),le=T(F),g&&g.l(F),F.forEach(_),y.forEach(_),this.h()},h(){b(r,"class","img"),b(i,"class","svelte-1e6tkyc"),b(l,"class","text svelte-1e6tkyc"),b(A,"class","btns svelte-1e6tkyc"),b(e,"class","outer svelte-1e6tkyc")},m(v,y){S(v,e,y),h(e,r),V(t,r,null),h(e,a),h(e,l),h(l,i),h(i,f),h(l,s),h(l,c),h(c,d),h(e,C),h(e,A),V(D,A,null),h(A,le),g&&g.m(A,null),N=!0},p(v,y){const Y={};y&1&&(Y.id=v[0].image_link_id),t.$set(Y),(!N||y&1)&&o!==(o=v[0].title+"")&&te(f,o),(!N||y&1)&&u!==(u=new Date(JSON.parse(v[0].createdAt)).toLocaleString("de-DE")+"")&&te(d,u);const B={};y&1&&(B.onclick=`/articles/${v[0].id}`),D.$set(B),v[2]?g?(g.p(v,y),y&4&&m(g,1)):(g=ye(v),g.c(),m(g,1),g.m(A,null)):g&&(H(),w(g,1,1,()=>{g=null}),Q())},i(v){N||(m(t.$$.fragment,v),m(D.$$.fragment,v),m(g),N=!0)},o(v){w(t.$$.fragment,v),w(D.$$.fragment,v),w(g),N=!1},d(v){v&&_(e),I(t),I(D),g&&g.d()}}}function ye(n){let e,r;return e=new Ie({props:{text:"L\xF6schen",onclick:n[3]}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,a){V(e,t,a),r=!0},p(t,a){const l={};a&3&&(l.onclick=t[3]),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function tt(n){let e,r,t=!n[1]&&we(n);return{c(){t&&t.c(),e=re()},l(a){t&&t.l(a),e=re()},m(a,l){t&&t.m(a,l),S(a,e,l),r=!0},p(a,[l]){a[1]?t&&(H(),w(t,1,1,()=>{t=null}),Q()):t?(t.p(a,l),l&2&&m(t,1)):(t=we(a),t.c(),m(t,1),t.m(e.parentNode,e))},i(a){r||(m(t),r=!0)},o(a){w(t),r=!1},d(a){t&&t.d(a),a&&_(e)}}}function rt(n,e,r){let t;W(n,Ve,o=>r(2,t=o));let{article:a}=e,l=!1;const i=async()=>{r(1,l=!0),await et(a.id)};return n.$$set=o=>{"article"in o&&r(0,a=o.article)},[a,l,t,i]}class it extends P{constructor(e){super(),J(this,e,rt,tt,U,{article:0})}}var Be=function(e,r){var t="000000000"+e;return t.substr(t.length-r)},at=Be,nt=typeof window=="object"?window:self,lt=Object.keys(nt).length,st=navigator.mimeTypes?navigator.mimeTypes.length:0,ot=at((st+navigator.userAgent.length).toString(36)+lt.toString(36),4),ct=function(){return ot},ue,ke=typeof window<"u"&&(window.crypto||window.msCrypto)||typeof self<"u"&&self.crypto;if(ke){var ut=Math.pow(2,32)-1;ue=function(){return Math.abs(ke.getRandomValues(new Uint32Array(1))[0]/ut)}}else ue=Math.random;var ft=ue,ae=ct,Re=Be,_t=ft,q=0,_e=4,ne=36,Te=Math.pow(ne,_e);function fe(){return Re((_t()*Te<<0).toString(ne),_e)}function Ce(){return q=q<Te?q:0,q++,q-1}function X(){var n="c",e=new Date().getTime().toString(ne),r=Re(Ce().toString(ne),_e),t=ae(),a=fe()+fe();return n+e+r+t+a}X.slug=function(){var e=new Date().getTime().toString(36),r=Ce().toString(36).slice(-4),t=ae().slice(0,1)+ae().slice(-1),a=fe().slice(-2);return e.slice(-2)+r+t+a};X.isCuid=function(e){return typeof e!="string"?!1:!!e.startsWith("c")};X.isSlug=function(e){if(typeof e!="string")return!1;var r=e.length;return r>=7&&r<=10};X.fingerprint=ae;var dt=X;function Ee(n,e,r){const t=n.slice();return t[2]=e[r],t}function Se(n){let e,r,t,a;return t=new xe({props:{size:32}}),{c(){e=k("div"),r=k("a"),z(t.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var i=p(e);r=E(i,"A",{class:!0,href:!0});var o=p(r);M(t.$$.fragment,o),o.forEach(_),i.forEach(_),this.h()},h(){b(r,"class","add_button svelte-wyeji8"),b(r,"href",`/articles/${dt()}`),b(e,"class","add svelte-wyeji8")},m(l,i){S(l,e,i),h(e,r),V(t,r,null),a=!0},p:Z,i(l){a||(m(t.$$.fragment,l),a=!0)},o(l){w(t.$$.fragment,l),a=!1},d(l){l&&_(e),I(t)}}}function Ae(n,e){let r,t,a;return t=new it({props:{article:e[2]}}),{key:n,first:null,c(){r=re(),z(t.$$.fragment),this.h()},l(l){r=re(),M(t.$$.fragment,l),this.h()},h(){this.first=r},m(l,i){S(l,r,i),V(t,l,i),a=!0},p(l,i){e=l;const o={};i&1&&(o.article=e[2]),t.$set(o)},i(l){a||(m(t.$$.fragment,l),a=!0)},o(l){w(t.$$.fragment,l),a=!1},d(l){l&&_(r),I(t,l)}}}function ht(n){let e,r,t=[],a=new Map,l,i=n[1]&&Se(),o=n[0];const f=s=>s[2];for(let s=0;s<o.length;s+=1){let c=Ee(n,o,s),u=f(c);a.set(u,t[s]=Ae(u,c))}return{c(){e=k("div"),i&&i.c(),r=R();for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=E(s,"DIV",{class:!0});var c=p(e);i&&i.l(c),r=T(c);for(let u=0;u<t.length;u+=1)t[u].l(c);c.forEach(_),this.h()},h(){b(e,"class","listing svelte-wyeji8")},m(s,c){S(s,e,c),i&&i.m(e,null),h(e,r);for(let u=0;u<t.length;u+=1)t[u].m(e,null);l=!0},p(s,[c]){s[1]?i?(i.p(s,c),c&2&&m(i,1)):(i=Se(),i.c(),m(i,1),i.m(e,r)):i&&(H(),w(i,1,1,()=>{i=null}),Q()),c&1&&(o=s[0],H(),t=Ne(t,c,f,1,s,o,a,e,je,Ae,null,Ee),Q())},i(s){if(!l){m(i);for(let c=0;c<o.length;c+=1)m(t[c]);l=!0}},o(s){w(i);for(let c=0;c<t.length;c+=1)w(t[c]);l=!1},d(s){s&&_(e),i&&i.d();for(let c=0;c<t.length;c+=1)t[c].d()}}}function mt(n,e,r){let t;W(n,Ve,l=>r(1,t=l));let{articles:a}=e;return n.$$set=l=>{"articles"in l&&r(0,a=l.articles)},[a,t]}class gt extends P{constructor(e){super(),J(this,e,mt,ht,U,{articles:0})}}function De(n){let e,r;return{c(){e=O("title"),r=x(n[1])},l(t){e=L(t,"title",{});var a=p(e);r=ee(a,n[1]),a.forEach(_)},m(t,a){S(t,e,a),h(e,r)},p(t,a){a&2&&te(r,t[1])},d(t){t&&_(e)}}}function vt(n){let e,r,t=n[1]&&De(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let i=0;i<a.length;i+=1)l=j(l,a[i]);return{c(){e=O("svg"),t&&t.c(),r=O("path"),this.h()},l(i){e=L(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var o=p(e);t&&t.l(o),r=L(o,"path",{d:!0}),p(r).forEach(_),o.forEach(_),this.h()},h(){b(r,"d","M29,27.5859l-7.5521-7.5521a11.0177,11.0177,0,1,0-1.4141,1.4141L27.5859,29ZM4,13a9,9,0,1,1,9,9A9.01,9.01,0,0,1,4,13Z"),G(e,l)},m(i,o){S(i,e,o),t&&t.m(e,null),h(e,r)},p(i,[o]){i[1]?t?t.p(i,o):(t=De(i),t.c(),t.m(e,r)):t&&(t.d(1),t=null),G(e,l=Me(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},o&1&&{width:i[0]},o&1&&{height:i[0]},o&4&&i[2],o&8&&i[3]]))},i:Z,o:Z,d(i){i&&_(e),t&&t.d()}}}function pt(n,e,r){let t,a;const l=["size","title"];let i=K(e,l),{size:o=16}=e,{title:f=void 0}=e;return n.$$set=s=>{r(5,e=j(j({},e),$(s))),r(3,i=K(e,l)),"size"in s&&r(0,o=s.size),"title"in s&&r(1,f=s.title)},n.$$.update=()=>{r(4,t=e["aria-label"]||e["aria-labelledby"]||f),r(2,a={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=$(e),[o,f,a,i,t]}class bt extends P{constructor(e){super(),J(this,e,pt,vt,U,{size:0,title:1})}}function wt(n){let e,r,t,a,l,i,o,f,s,c;return l=new bt({props:{fill:"var(--primary-color)",size:32}}),{c(){e=k("div"),r=k("input"),t=R(),a=k("button"),z(l.$$.fragment),this.h()},l(u){e=E(u,"DIV",{class:!0});var d=p(e);r=E(d,"INPUT",{placeholder:!0,type:!0,class:!0}),t=T(d),a=E(d,"BUTTON",{title:!0,class:!0});var C=p(a);M(l.$$.fragment,C),C.forEach(_),d.forEach(_),this.h()},h(){b(r,"placeholder","Suche"),b(r,"type","search"),b(r,"class","svelte-15wmmtb"),b(a,"title","Suchen"),b(a,"class","svelte-15wmmtb"),b(e,"class","svelte-15wmmtb")},m(u,d){S(u,e,d),h(e,r),me(r,n[0]),h(e,t),h(e,a),V(l,a,null),f=!0,s||(c=[se(r,"input",n[5]),se(r,"keypress",n[4]),se(a,"click",function(){Oe(n[1])&&n[1].apply(this,arguments)})],s=!0)},p(u,[d]){n=u,d&1&&me(r,n[0])},i(u){f||(m(l.$$.fragment,u),Le(()=>{o&&o.end(1),i=Pe(e,pe,{...n[2],y:-40}),i.start()}),f=!0)},o(u){w(l.$$.fragment,u),i&&i.invalidate(),o=Je(e,pe,{...n[3],y:-40}),f=!1},d(u){u&&_(e),I(l),u&&o&&o.end(),s=!1,Ue(c)}}}function yt(n,e,r){let t,a;W(n,Xe,s=>r(2,t=s)),W(n,Fe,s=>r(3,a=s));let{value:l=""}=e,{on_search:i}=e;function o(s){s.key==="Enter"&&i()}function f(){l=this.value,r(0,l)}return n.$$set=s=>{"value"in s&&r(0,l=s.value),"on_search"in s&&r(1,i=s.on_search)},[l,i,t,a,o,f]}class kt extends P{constructor(e){super(),J(this,e,yt,wt,U,{value:0,on_search:1})}}function ze(n){let e,r;return e=new gt({props:{articles:n[2]}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,a){V(e,t,a),r=!0},p(t,a){const l={};a&4&&(l.articles=t[2]),e.$set(l)},i(t){r||(m(e.$$.fragment,t),r=!0)},o(t){w(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function Et(n){let e,r,t,a,l,i;function o(c){n[6](c)}let f={on_search:n[5]};n[1]!==void 0&&(f.value=n[1]),t=new kt({props:f}),Ye.push(()=>qe(t,"value",o));let s=n[2]&&ze(n);return{c(){e=k("div"),r=k("div"),z(t.$$.fragment),l=R(),s&&s.c(),this.h()},l(c){e=E(c,"DIV",{class:!0});var u=p(e);r=E(u,"DIV",{});var d=p(r);M(t.$$.fragment,d),d.forEach(_),l=T(u),s&&s.l(u),u.forEach(_),this.h()},h(){b(e,"class","outer svelte-1mtzz50")},m(c,u){S(c,e,u),h(e,r),V(t,r,null),h(e,l),s&&s.m(e,null),i=!0},p(c,[u]){const d={};u&3&&(d.on_search=c[5]),!a&&u&2&&(a=!0,d.value=c[1],Ze(()=>a=!1)),t.$set(d),c[2]?s?(s.p(c,u),u&4&&m(s,1)):(s=ze(c),s.c(),m(s,1),s.m(e,null)):s&&(H(),w(s,1,1,()=>{s=null}),Q())},i(c){i||(m(t.$$.fragment,c),m(s),i=!0)},o(c){w(t.$$.fragment,c),w(s),i=!1},d(c){c&&_(e),I(t),s&&s.d()}}}const oe=12;function St(n,e,r){let t;W(n,He,u=>r(4,t=u));let{page:a=0}=e,l="",i={search:""},o;async function f(u,d){!u||r(2,o=await Ge(d*oe,d*oe+oe,u))}const s=async()=>{r(0,i.search=l,i)};function c(u){l=u,r(1,l)}return n.$$set=u=>{"page"in u&&r(3,a=u.page)},n.$$.update=()=>{n.$$.dirty&25&&f(i,a)},[i,l,o,a,t,s,c]}class Tt extends P{constructor(e){super(),J(this,e,St,Et,U,{page:3})}}export{Tt as A};
